{"version":3,"sources":["webpack:///src/app/terminar-compra/terminar-compra.page.html","webpack:///src/app/terminar-compra/terminar-compra-routing.module.ts","webpack:///src/app/terminar-compra/terminar-compra.module.ts","webpack:///src/app/terminar-compra/terminar-compra.page.scss","webpack:///src/app/terminar-compra/terminar-compra.page.ts"],"names":["routes","path","component","TerminarCompraPageRoutingModule","imports","forChild","exports","TerminarCompraPageModule","declarations","TerminarCompraPage","nav","router","global","api","modalCtrl","comision","parseFloat","a_pagar","precio_final","comision_iva","toFixed","total_tarjeta","console","log","back","navigate","tipo","colorModal","create","componentProps","showBackdrop","backdropDismiss","mode","cssClass","swipeToClose","modal","present","onDidDismiss","resp","data","success","obj","idorder","id_paypal","id_pago","email","card","nombre","subtotal","pago","updatePayment","toPromise","then","response","showToastAndRedirect","message","showToast","read","selector","template"],"mappings":"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","file":"terminar-compra-terminar-compra-module-es5.js","sourcesContent":["export default \"<ion-header>\\r\\n\\r\\n  <ion-toolbar mode=\\\"ios\\\">\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-button class=\\\"custom-button\\\" (click)=\\\"back()\\\"\\r\\n        style=\\\"color: white !important;text-transform: capitalize !important;\\\">\\r\\n        <ion-icon style=\\\"color: white !important;text-transform: capitalize !important;\\\"\\r\\n          name=\\\"arrow-back-circle-outline\\\">\\r\\n        </ion-icon>\\r\\n        <span style=\\\"color: white !important;font-weight: bold;\\\">VOLVER</span>\\r\\n      </ion-button>\\r\\n    </ion-buttons>\\r\\n    <ion-img src=\\\"assets/zanahoria_blanca.png\\\"\\r\\n      style=\\\"width:6%;float:right;padding-top:0px!important;margin-top:0px!important\\\"\\r\\n      class=\\\"img_header ion-margin-top ion-padding-top\\\"></ion-img>\\r\\n\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n\\r\\n<ion-content>\\r\\n\\r\\n  <ion-row style=\\\"margin-top: 20%;\\\">\\r\\n    <ion-col size=\\\"1\\\">\\r\\n    </ion-col>\\r\\n    <ion-col size=\\\"9\\\" *ngIf=\\\"this.global.a_pagar\\\">\\r\\n      <h3 style=\\\"font-weight: bold;font-size: 38px;text-align: center;\\\">EL TOTAL DE SU COMPRA ES:</h3>\\r\\n      <h3 style=\\\"font-weight: bold;font-size: 52px;text-align: center;color:#00b050\\\">{{this.global.a_pagar.precio_final | currency }} MXN</h3>\\r\\n    </ion-col>\\r\\n    <ion-col size=\\\"1\\\"></ion-col>\\r\\n  </ion-row>\\r\\n  <ion-row style=\\\"margin-top:2%\\\">\\r\\n    <ion-col size=\\\"12\\\" style=\\\"text-align: center;\\\">\\r\\n      <h4 style=\\\"font-weight: bold;\\\">Si desea pagar con tarjeta se le cobrara una comision del 3.6% + IVA. Dando un total de {{total_tarjeta | currency }} MXN.</h4>\\r\\n    </ion-col>\\r\\n  </ion-row>\\r\\n\\r\\n  <div class=\\\"body-input\\\" style=\\\"margin-left:10%;margin-right:10%;margin-top:10%\\\">\\r\\n    <ion-row>\\r\\n      <ion-col size=\\\"1\\\"></ion-col>\\r\\n      <ion-col size=\\\"9\\\" style=\\\"text-align: center;\\\">\\r\\n        <button type=\\\"button\\\" class=\\\"buscar-btn2\\\" style=\\\"width: 100%;\\\"\\r\\n          (click)=\\\"elegirMetodoPago('TRANSFERENCIA')\\\">TRANSFERENCIA</button>\\r\\n      </ion-col>\\r\\n      <ion-col size=\\\"1\\\"></ion-col>\\r\\n    </ion-row>\\r\\n    <ion-row>\\r\\n      <ion-col size=\\\"1\\\"></ion-col>\\r\\n      <ion-col size=\\\"9\\\" style=\\\"text-align: center;\\\">\\r\\n\\r\\n        <button type=\\\"button\\\" class=\\\"buscar-btn2\\\" style=\\\"width: 100%;\\\"\\r\\n        (click)=\\\"elegirMetodoPago('TARJETA')\\\">TARJETA</button>\\r\\n\\r\\n      </ion-col>\\r\\n      <ion-col size=\\\"1\\\"></ion-col>\\r\\n    </ion-row>\\r\\n  </div>\\r\\n\\r\\n  \\r\\n\\r\\n\\r\\n</ion-content>\";","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { TerminarCompraPage } from './terminar-compra.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: TerminarCompraPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class TerminarCompraPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { TerminarCompraPageRoutingModule } from './terminar-compra-routing.module';\r\n\r\nimport { TerminarCompraPage } from './terminar-compra.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    TerminarCompraPageRoutingModule\r\n  ],\r\n  declarations: [TerminarCompraPage]\r\n})\r\nexport class TerminarCompraPageModule {}\r\n","export default \".cp-text {\\n  font-weight: bold;\\n  font-size: 21px;\\n  color: white;\\n}\\n\\n.buscar-btn2 {\\n  border-radius: 20px;\\n  font-size: 18px;\\n  background-color: #ff7f23;\\n  color: white;\\n  padding: 10px 10px 10px;\\n}\\n\\n.buscar-btn {\\n  border-radius: 20px;\\n  font-size: 18px;\\n  background-color: #00b050;\\n  color: white;\\n  padding: 10px 10px 10px;\\n}\\n\\nion-toolbar {\\n  --background: #ff7f23;\\n}\\n\\n.buscar-btn:focus {\\n  outline: none;\\n  box-shadow: none;\\n}\\n\\n::-moz-placeholder {\\n  color: black;\\n  font-weight: bold;\\n  text-align: center;\\n}\\n\\n::placeholder {\\n  color: black;\\n  font-weight: bold;\\n  text-align: center;\\n}\\n\\n::-webkit-input-placeholder {\\n  text-align: center;\\n}\\n\\n:-moz-placeholder {\\n  /* Firefox 18- */\\n  text-align: center;\\n}\\n\\n::-moz-placeholder {\\n  /* Firefox 19+ */\\n  text-align: center;\\n}\\n\\n:-ms-input-placeholder {\\n  text-align: center;\\n}\\n\\nion-input {\\n  --placeholder-color: initial;\\n  --placeholder-font-style: initial;\\n  --placeholder-font-weight: bold !important;\\n  text-align: center !important;\\n  --placeholder-opacity: unset !important;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2FsZnJlZG8vQWxmcmVkby9QZXJzb25hbC9Qcm95ZWN0b3MvRnJlc2tvL2ZyZXNrby1hcHAvc3JjL2FwcC90ZXJtaW5hci1jb21wcmEvdGVybWluYXItY29tcHJhLnBhZ2Uuc2NzcyIsInNyYy9hcHAvdGVybWluYXItY29tcHJhL3Rlcm1pbmFyLWNvbXByYS5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSxpQkFBQTtFQUNBLGVBQUE7RUFDQSxZQUFBO0FDQ0o7O0FERUE7RUFDSSxtQkFBQTtFQUNBLGVBQUE7RUFDQSx5QkFBQTtFQUNBLFlBQUE7RUFDQSx1QkFBQTtBQ0NKOztBREdBO0VBQ0UsbUJBQUE7RUFDQSxlQUFBO0VBQ0EseUJBQUE7RUFDQSxZQUFBO0VBQ0EsdUJBQUE7QUNBRjs7QURHQTtFQUNHLHFCQUFBO0FDQUg7O0FER0E7RUFDRSxhQUFBO0VBQ0EsZ0JBQUE7QUNBRjs7QURFQTtFQUNJLFlBQUE7RUFDQSxpQkFBQTtFQUNBLGtCQUFBO0FDQ0o7O0FESkE7RUFDSSxZQUFBO0VBQ0EsaUJBQUE7RUFDQSxrQkFBQTtBQ0NKOztBRENBO0VBQ0ksa0JBQUE7QUNFSjs7QURDQztFQUFvQixnQkFBQTtFQUNqQixrQkFBQTtBQ0dKOztBREFDO0VBQXNCLGdCQUFBO0VBQ25CLGtCQUFBO0FDSUo7O0FEREM7RUFDRyxrQkFBQTtBQ0lKOztBRERDO0VBQ0csNEJBQUE7RUFDQSxpQ0FBQTtFQUNBLDBDQUFBO0VBQ0EsNkJBQUE7RUFDQSx1Q0FBQTtBQ0lKIiwiZmlsZSI6InNyYy9hcHAvdGVybWluYXItY29tcHJhL3Rlcm1pbmFyLWNvbXByYS5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuY3AtdGV4dHtcclxuICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xyXG4gICAgZm9udC1zaXplOiAyMXB4O1xyXG4gICAgY29sb3I6d2hpdGU7XHJcbn1cclxuXHJcbi5idXNjYXItYnRuMntcclxuICAgIGJvcmRlci1yYWRpdXM6IDIwcHg7XHJcbiAgICBmb250LXNpemU6IDE4cHg7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmY3ZjIzO1xyXG4gICAgY29sb3I6IHdoaXRlO1xyXG4gICAgcGFkZGluZzogMTBweCAxMHB4IDEwcHg7XHJcbiAgfVxyXG4gIFxyXG5cclxuLmJ1c2Nhci1idG57XHJcbiAgYm9yZGVyLXJhZGl1czogMjBweDtcclxuICBmb250LXNpemU6IDE4cHg7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogIzAwYjA1MDtcclxuICBjb2xvcjogd2hpdGU7XHJcbiAgcGFkZGluZzogMTBweCAxMHB4IDEwcHg7XHJcbn1cclxuXHJcbmlvbi10b29sYmFyIHtcclxuICAgLS1iYWNrZ3JvdW5kOiAjZmY3ZjIzO1xyXG59XHJcblxyXG4uYnVzY2FyLWJ0bjpmb2N1cyB7XHJcbiAgb3V0bGluZTogbm9uZTtcclxuICBib3gtc2hhZG93OiBub25lO1xyXG59XHJcbjo6cGxhY2Vob2xkZXJ7XHJcbiAgICBjb2xvcjogYmxhY2s7XHJcbiAgICBmb250LXdlaWdodDogYm9sZDtcclxuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcclxufVxyXG46Oi13ZWJraXQtaW5wdXQtcGxhY2Vob2xkZXIge1xyXG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG4gfVxyXG4gXHJcbiA6LW1vei1wbGFjZWhvbGRlciB7IC8qIEZpcmVmb3ggMTgtICovXHJcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7ICBcclxuIH1cclxuIFxyXG4gOjotbW96LXBsYWNlaG9sZGVyIHsgIC8qIEZpcmVmb3ggMTkrICovXHJcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7ICBcclxuIH1cclxuIFxyXG4gOi1tcy1pbnB1dC1wbGFjZWhvbGRlciB7ICBcclxuICAgIHRleHQtYWxpZ246IGNlbnRlcjsgXHJcbiB9XHJcblxyXG4gaW9uLWlucHV0IHtcclxuICAgIC0tcGxhY2Vob2xkZXItY29sb3I6IGluaXRpYWw7XHJcbiAgICAtLXBsYWNlaG9sZGVyLWZvbnQtc3R5bGU6IGluaXRpYWw7XHJcbiAgICAtLXBsYWNlaG9sZGVyLWZvbnQtd2VpZ2h0OiBib2xkICFpbXBvcnRhbnQ7XHJcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXIgIWltcG9ydGFudDtcclxuICAgIC0tcGxhY2Vob2xkZXItb3BhY2l0eTogdW5zZXQgIWltcG9ydGFudDtcclxufSIsIi5jcC10ZXh0IHtcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gIGZvbnQtc2l6ZTogMjFweDtcbiAgY29sb3I6IHdoaXRlO1xufVxuXG4uYnVzY2FyLWJ0bjIge1xuICBib3JkZXItcmFkaXVzOiAyMHB4O1xuICBmb250LXNpemU6IDE4cHg7XG4gIGJhY2tncm91bmQtY29sb3I6ICNmZjdmMjM7XG4gIGNvbG9yOiB3aGl0ZTtcbiAgcGFkZGluZzogMTBweCAxMHB4IDEwcHg7XG59XG5cbi5idXNjYXItYnRuIHtcbiAgYm9yZGVyLXJhZGl1czogMjBweDtcbiAgZm9udC1zaXplOiAxOHB4O1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDBiMDUwO1xuICBjb2xvcjogd2hpdGU7XG4gIHBhZGRpbmc6IDEwcHggMTBweCAxMHB4O1xufVxuXG5pb24tdG9vbGJhciB7XG4gIC0tYmFja2dyb3VuZDogI2ZmN2YyMztcbn1cblxuLmJ1c2Nhci1idG46Zm9jdXMge1xuICBvdXRsaW5lOiBub25lO1xuICBib3gtc2hhZG93OiBub25lO1xufVxuXG46OnBsYWNlaG9sZGVyIHtcbiAgY29sb3I6IGJsYWNrO1xuICBmb250LXdlaWdodDogYm9sZDtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xufVxuXG46Oi13ZWJraXQtaW5wdXQtcGxhY2Vob2xkZXIge1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG59XG5cbjotbW96LXBsYWNlaG9sZGVyIHtcbiAgLyogRmlyZWZveCAxOC0gKi9cbiAgdGV4dC1hbGlnbjogY2VudGVyO1xufVxuXG46Oi1tb3otcGxhY2Vob2xkZXIge1xuICAvKiBGaXJlZm94IDE5KyAqL1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG59XG5cbjotbXMtaW5wdXQtcGxhY2Vob2xkZXIge1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG59XG5cbmlvbi1pbnB1dCB7XG4gIC0tcGxhY2Vob2xkZXItY29sb3I6IGluaXRpYWw7XG4gIC0tcGxhY2Vob2xkZXItZm9udC1zdHlsZTogaW5pdGlhbDtcbiAgLS1wbGFjZWhvbGRlci1mb250LXdlaWdodDogYm9sZCAhaW1wb3J0YW50O1xuICB0ZXh0LWFsaWduOiBjZW50ZXIgIWltcG9ydGFudDtcbiAgLS1wbGFjZWhvbGRlci1vcGFjaXR5OiB1bnNldCAhaW1wb3J0YW50O1xufSJdfQ== */\";","import { PagarStripePage } from './../pagar-stripe/pagar-stripe.page';\r\nimport { ApiService } from 'src/app/services/api.service';\r\nimport { GlobalService } from './../services/global.service';\r\nimport { Router } from '@angular/router';\r\nimport { Component, ElementRef, OnInit, ViewChild } from '@angular/core';\r\nimport { NavController, ModalController } from '@ionic/angular';\r\n\r\n\r\n@Component({\r\n  selector: 'app-terminar-compra',\r\n  templateUrl: './terminar-compra.page.html',\r\n  styleUrls: ['./terminar-compra.page.scss'],\r\n})\r\nexport class TerminarCompraPage implements OnInit {\r\n  @ViewChild('stripeButton', { read: ElementRef }) stripeButton: ElementRef;\r\n  total_tarjeta:any;\r\n  constructor(\r\n    private nav: NavController,\r\n    private router: Router,\r\n    private global: GlobalService,\r\n    private api: ApiService,\r\n    private modalCtrl: ModalController\r\n  ) {\r\n    let comision = parseFloat(this.global.a_pagar.precio_final) * 0.036;\r\n    let comision_iva = comision * 0.16;\r\n    let a_pagar = (parseFloat(this.global.a_pagar.precio_final) + comision + comision_iva).toFixed(2);\r\n    this.total_tarjeta = a_pagar;\r\n  }\r\n\r\n  async ngOnInit() {\r\n    console.log('A Pagar', this.global.a_pagar);\r\n    if (this.global.a_pagar == null) {\r\n      this.back();\r\n    }\r\n  }\r\n\r\n\r\n\r\n  back() {\r\n    this.router.navigate(['tabs/categories']);\r\n  }\r\n\r\n  async elegirMetodoPago(tipo) {\r\n    if (tipo == \"TARJETA\") {\r\n\r\n      let colorModal = \"cupertino-bottom-modal-black\";\r\n      const modal = await this.modalCtrl.create({\r\n        component: PagarStripePage,\r\n        componentProps: {},\r\n        showBackdrop: true,\r\n        backdropDismiss: true,\r\n        mode: \"ios\",\r\n        cssClass: colorModal,\r\n        swipeToClose: true\r\n      });\r\n      await modal.present();\r\n      let resp: any = await modal.onDidDismiss();\r\n      if (resp != null) {\r\n        if (resp.data.success) {\r\n          let obj = {\r\n            idorder: this.global.a_pagar.idorder,\r\n            id_paypal: resp.data.data.id_pago,\r\n            email: resp.data.data.card,\r\n            nombre: \"Stripe\",\r\n            subtotal: resp.data.data.pago,// this.global.a_pagar.precio_final\r\n          }\r\n          this.api.updatePayment(obj.idorder, obj.subtotal, obj.id_paypal, obj.email, obj.nombre).toPromise().then((response: any) => {\r\n            if (response.success) {\r\n              this.global.showToastAndRedirect(response.message, \"/tabs/categories\");\r\n            } else {\r\n              this.global.showToast(response.message, \"danger\");\r\n            }\r\n          });\r\n        }\r\n      }\r\n\r\n    } else {\r\n      this.router.navigate(['pago-transferencia']);\r\n    }\r\n  }\r\n\r\n  async cobrarMercadoPago() {\r\n    this.router.navigate(['mercado-pago']);\r\n  }\r\n}\r\n"]}